var globalSettingsDefaults={fadingEnabled:false,barShadows:false,barShadowDepth:3,dropShadows:false,gridLines:false,pointLabels:false,pointLabelsOutline:false,showDataTable:false};var chartsOnDOM={};isIE=(window.ActiveXObject)?true:false;function createJQChart(b){var f={concatXLabel:false,nobackground:true,drawGridLines:false,pointLabelStyle:"color: black; font-size: 12pt; font-weight: bold",pointLabelAdjustX:-3,pointLabelAdjustY:-7,AxisLabelX:"",AxisLabelY:"",DataTextAngle:-30};b=jQuery.extend(true,f,b);if(document.getElementById(b.uniqueid)==false){alert("createJQChart Error - The target div/uniqueid does not exists");return false}setChartWidthAttribs(b);makeElementVisible(b.uniqueid+"loader");if(b.externalSource){document.getElementById(b.uniqueid).innerHTML="Loading chart data...";var i=b.externalSource;if(!b.oldExternalSource){b.oldExternalSource=b.externalSource}b.externalSource=undefined;b=buildExternalSourceParams(b);i+=String(b.externalSourceParams).replace(/ /g,"%20");b.lastURLpull=i;if(b.externalSourceDebug){var d=confirm("Now pulling from external source: "+i+"\n\nWould you like to navigate here?");if(d){document.location=i}}var g=new YAHOO.util.DataSource(i);g.responseType=YAHOO.util.DataSource.TYPE_JSON;g.responseSchema={resultsList:"chart"};var c=new Function("requestNumber","value","exception","createJQChart_asynchReturn(requestNumber, value, exception, "+YAHOO.lang.JSON.stringify(b)+");");var e={success:c,failure:c};g.sendRequest("",e);return 3}document.getElementById(b.uniqueid).innerHTML="";document.getElementById(b.uniqueid).className="";document.getElementById(b.uniqueid+"toplegend").innerHTML="";if(typeof b.barMargin!="undefined"){b=jQuery.extend(true,b,{seriesDefaults:{rendererOptions:{barMargin:b.barMargin}}});b.barMargin=undefined}if(typeof b.legendLocation!="undefined"){b=jQuery.extend(true,b,{legend:{location:b.legendLocation}});b.legendLocation=undefined}if(typeof b.legendRowCount!="undefined"){b=jQuery.extend(true,b,{legend:{rendererOptions:{numberRows:b.legendRowCount}}});b.legendRowCount=undefined}b.chartData=forceIntegerArray(b.chartData);document.getElementById(b.uniqueid+"holder").style.display="";makeElementInvisible(b.uniqueid+"holder");document.getElementById(b.uniqueid+"loader").style.position="absolute";document.getElementById(b.uniqueid+"loader").finnishFadeCallback=new Function("fadeIn('"+b.uniqueid+"holder', 500);");fadeOut(b.uniqueid+"loader",500);setChartWidthAttribs(b);chartsOnDOM[b.uniqueid]=jQuery.extend(true,{},b);switch(b.chartType){case"stackedbar":b.varyBarColor=false;if(typeof b.showlegend=="undefined"){b.showlegend=true}var h=createJQChart_StackedBar(b);break;case"bar":if(typeof b.chartData[0]=="object"){b.varyBarColor=false;b.showlegend=true}else{b.chartData=[b.chartData];b.links=[b.links];b.varyBarColor=true;b.showlegend=false}b.stackSeries=false;var h=createJQChart_StackedBar(b);break;case"line":var h=createChartJQStackedLine(b);break;case"stackedline":var h=createChartJQStackedLine(b);break;case"pie":b.links=[b.links];var h=createChartJQPie(b);break;default:alert("createJQChart Error - chartType is invalid ("+b.chartType+")");return false}removeOverlappingPointLabels(b);applyChartBackground(b);applyChartWidgets(b);createChartThreatLegend(b);applyChartBorders(b);globalSettingRefreashUI(b);var a=document.getElementById(b.uniqueid+"table");a.innerHTML=getTableFromChartData(b);if(getGlobalSetting("showDataTable")==="true"){a.style.display="";document.getElementById(b.uniqueid).innerHTML="";document.getElementById(b.uniqueid).style.width=0;document.getElementById(b.uniqueid).style.height=0;document.getElementById(b.uniqueid+"toplegend").style.display="none"}else{a.style.display="none"}return h}function createJQChart_asynchReturn(b,d,a,e){if(d){if(d.results[0]){if(d.results[0]["inheritCtl"]){if(d.results[0]["inheritCtl"]=="minimal"){var c=d.results[0];c.width=e.width;c.height=e.height;c.uniqueid=e.uniqueid;c.externalSource=e.externalSource;c.oldExternalSource=e.oldExternalSource;c.widgets=e.widgets}else{if(d.results[0]["inheritCtl"]=="none"){var c=d.results[0]}else{alert("Error - Unknown chart inheritance mode")}}}else{var c=jQuery.extend(true,e,d.results[0],true)}}else{if(confirm("Error - Chart creation failed due to data source error.\nIf you continuously see this message, please click Ok to navigate to data source, and copy-and-pase the text&data from there into email to Endeavor Systems.\n\nNavigate to the error-source?")){document.location=e.lastURLpull}}if(!c.chartData){alert('Chart Error - The remote data source for chart "'+e.uniqueid+'" located at '+e.lastURLpull+" did not return data to plot on a chart")}return createJQChart(c)}else{if(confirm("Error - Chart creation failed due to data source error.\nIf you continuously see this message, please click Ok to navigate to data source, and copy-and-pase the text&data from there into email to Endeavor Systems.\n\nNavigate to the error-source?")){document.location=e.lastURLpull}}return false}function createChartJQPie(e){usedLabelsPie=e.chartDataText;var d=[];for(var b=0;b<e.chartData.length;b++){e.chartDataText[b]+=" ("+e.chartData[b]+")";d[d.length]=[e.chartDataText[b],e.chartData[b]]}var a={title:e.title,seriesColors:e.colors,grid:{drawBorder:false,drawGridlines:false,shadow:false},axes:{xaxis:{tickOptions:{angle:e.DataTextAngle,fontSize:"10pt",formatString:"%.0f"}},yaxis:{tickOptions:{formatString:"%.0f"}}},seriesDefaults:{renderer:$.jqplot.PieRenderer,rendererOptions:{sliceMargin:0,showDataLabels:true,shadowAlpha:0.15,shadowOffset:0,lineLabels:true,lineLabelsLineColor:"#777"}},legend:{location:"s",show:false,rendererOptions:{numberRows:1}}};a.seriesDefaults.renderer.prototype.startAngle=0;$("[id="+e.uniqueid+"]").css("height",e.height);a=jQuery.extend(true,a,e);plot1=$.jqplot(e.uniqueid,[d],a);var c=new Function("ev","seriesIndex","pointIndex","data","var thisChartParamObj = "+YAHOO.lang.JSON.stringify(e)+"; chartClickEvent(ev, seriesIndex, pointIndex, data, thisChartParamObj);");$("#"+e.uniqueid).bind("jqplotDataClick",c)}function createJQChart_StackedBar(d){var f=[];var e=0;var h=0;var c=0;for(var i=0;i<d.chartDataText.length;i++){e=0;for(var g=0;g<d.chartData.length;g++){e+=d.chartData[g][i]}if(e>h){h=e}if(d.concatXLabel==true){d.chartDataText[i]+=" ("+e+")"}}var b=[];if(d.chartLayerText){for(i=0;i<d.chartLayerText.length;i++){b[i]={label:d.chartLayerText[i]}}}c=getNextNumberDivisibleBy5(h);yAxisTicks=[];yAxisTicks[0]=0;yAxisTicks[1]=(c/5)*1;yAxisTicks[2]=(c/5)*2;yAxisTicks[3]=(c/5)*3;yAxisTicks[4]=(c/5)*4;yAxisTicks[5]=(c/5)*5;$.jqplot.config.enablePlugins=true;var a={title:d.title,seriesColors:d.colors,stackSeries:true,series:b,seriesDefaults:{renderer:$.jqplot.BarRenderer,rendererOptions:{barWidth:35,showDataLabels:true,varyBarColor:d.varyBarColor,shadowAlpha:0.15,shadowOffset:0},pointLabels:{show:false,location:"s"}},axesDefaults:{tickRenderer:$.jqplot.CanvasAxisTickRenderer,borderWidth:0,labelOptions:{enableFontSupport:true,fontFamily:"arial, helvetica, clean, sans-serif",fontSize:"12pt",textColor:"#555555"}},axes:{xaxis:{label:d.AxisLabelX,labelRenderer:$.jqplot.CanvasAxisLabelRenderer,renderer:$.jqplot.CategoryAxisRenderer,ticks:d.chartDataText,tickOptions:{angle:d.DataTextAngle,fontFamily:"arial, helvetica, clean, sans-serif",fontSize:"10pt",textColor:"#555555"}},yaxis:{label:d.AxisLabelY,labelRenderer:$.jqplot.CanvasAxisLabelRenderer,min:0,max:c,autoscale:true,ticks:yAxisTicks,tickOptions:{formatString:"%.0f",fontFamily:"arial, helvetica, clean, sans-serif",fontSize:"10pt",textColor:"#555555"}}},highlighter:{show:false},grid:{gridLineWidth:0,shadow:false,borderWidth:1,gridLineColor:"#FFFFFF",background:"transparent",drawGridLines:d.drawGridLines,show:d.drawGridLines},legend:{show:d.showlegend,rendererOptions:{numberRows:1},location:"nw"}};if(isIE){a.grid.background="#FFFFFF"}$("[id="+d.uniqueid+"]").css("height",d.height);a=jQuery.extend(true,a,d);a=alterChartByGlobals(a);plot1=$.jqplot(d.uniqueid,d.chartData,a);var j=new Function("ev","seriesIndex","pointIndex","data","var thisChartParamObj = "+YAHOO.lang.JSON.stringify(d)+"; chartClickEvent(ev, seriesIndex, pointIndex, data, thisChartParamObj);");$("#"+d.uniqueid).bind("jqplotDataClick",j);removeDecFromPointLabels(d)}function createChartJQStackedLine(d){var b=[];var c=0;for(var a=0;a<d.chartDataText.length;a++){c=0;for(var e=0;e<["chartData"].length;e++){c+=["chartData"][e][a]}d.chartDataText[a]+=" ("+c+")"}plot1=$.jqplot(d.uniqueid,d.chartData,{title:d.title,seriesColors:["#F4FA58","#FAAC58","#FA5858"],series:[{label:"Open Findings",lineWidth:4,markerOptions:{style:"square"}},{label:"Closed Findings",lineWidth:4,markerOptions:{style:"square"}},{lineWidth:4,markerOptions:{style:"square"}}],seriesDefaults:{fill:false,showMarker:true,showLine:true},axes:{xaxis:{renderer:$.jqplot.CategoryAxisRenderer,ticks:d.chartDataText},yaxis:{min:0}},highlighter:{show:false},legend:{show:true,rendererOptions:{numberRows:1},location:"nw"}});$("#"+d.uniqueid).bind("jqplotDataClick",function(h,f,g,i){alert("You clicked on bar-level "+f+" in column: "+g)})}function createChartThreatLegend(e){if(e.showThreatLegend){if(e.showThreatLegend==true){var b="100%";if(e.threatLegendWidth){b=e.threatLegendWidth}var d='<table style="font-size: 12px; color: #555555;" width="'+b+'">  <tr>    <td style="text-align: center;" width="40%">Threat Level</td>    <td width="20%">    <table>      <tr>        <td bgcolor="#FF0000" width="1px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>        <td>&nbsp;High</td>      </tr>    </table>    </td>    <td width="20%">    <table>      <tr>        <td bgcolor="#FF6600" width="1px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>        <td>&nbsp;Moderate&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>      </tr>    </table>    </td>    <td width="20%">    <table>      <tr>        <td bgcolor="#FFC000" width="1px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>        <td>&nbsp;Low</td>      </tr>    </table>    </td>  </tr></table>';var a=e.uniqueid;var c=document.getElementById(a+"toplegend");c.innerHTML=d}}}function chartClickEvent(d,a,c,e,b){var g=false;if(b.links){if(typeof b.links=="string"){g=b.links}else{if(b.links[a]){if(typeof b.links[a]=="object"){g=b.links[a][c]}else{g=b.links[a]}}}}if(g!=false){g=String(g).replace("#ColumnLabel#",b.chartDataText[c])}if(b.linksdebug==true){var f="You clicked on layer "+a+", in column "+c+", which has the data of "+e[1]+"\n";f+="The link information for this element should be stored as a string in chartParamData['links'], or as a string in chartParamData['links']["+a+"]["+c+"]\n";if(g!=false){f+="The link with this element is "+g}alert(f)}else{if(g!=false&&String(g)!="null"){document.location=g}}}function forceIntegerArray(b){for(var a=0;a<b.length;a++){if(typeof b[a]=="object"){b[a]=forceIntegerArray(b[a])}else{b[a]=b[a]*1}}return b}function applyChartBorders(i){if(typeof i.borders=="undefined"){if(i.chartType=="bar"||i.chartType=="stackedbar"){i.borders="BL"}else{return}}var g=document.getElementById(i.uniqueid);var d=g.childNodes;for(var a=d.length-1;a>0;a++){if(typeof d[a].nodeName!="undefined"){if(String(d[a].nodeName).toLowerCase()=="canvas"){if(d[a].className="jqplot-series-shadowCanvas"){var f=d[a];var c=f.getContext("2d");var e=d[a].height;var b=d[a].width;c.strokeStyle="#777777";c.lineWidth=3;c.beginPath();if(i.borders.indexOf("L")!=-1){c.moveTo(0,0);c.lineTo(0,e);c.stroke()}if(i.borders.indexOf("B")!=-1){c.moveTo(0,e);c.lineTo(b,e);c.stroke()}if(i.borders.indexOf("R")!=-1){c.moveTo(b,0);c.lineTo(b,e);c.stroke()}if(i.borders.indexOf("T")!=-1){c.moveTo(0,0);c.lineTo(b,0);c.stroke()}return}}}}}function applyChartBackground(g){var f=document.getElementById(g.uniqueid);if(g.nobackground){if(g.nobackground==true){return}}if(g.background){if(g.background["nobackground"]){if(g.background["nobackground"]==true){return}}}var b="/images/logoShark.png";if(g.background){if(g.background["URL"]){b=g.background["URL"]}}var d='<img height="100%" src="'+b+'" style="opacity:0.15;filter:alpha(opacity=15);opacity:0.15" />';if(g.background){if(g.background["overrideHTML"]){b=g.background["overrideHTML"]}}if(g.chartType=="pie"){var a=f.childNodes[3];var h=f.childNodes[4]}else{var a=f.childNodes[6];var h=f.childNodes[5]}var e=a.style;injectedBackgroundImg=document.createElement("span");injectedBackgroundImg.setAttribute("align","center");injectedBackgroundImg.setAttribute("style","position: absolute; left: "+e.left+"; top: "+e.top+"; width: "+a.width+"px; height: "+a.height+"px;");var c=f.insertBefore(injectedBackgroundImg,h);c.innerHTML=d}function applyChartWidgets(d){var f=document.getElementById(d.uniqueid+"WidgetSpace");if(typeof d.widgets=="undefined"){f.innerHTML="<br/><i>There are no parameters for this chart.</i><br/><br/>";return}else{if(d.widgets.length==0){f.innerHTML="<br/><i>There are no parameters for this chart.</i><br/><br/>";return}}if(d.widgets){var b="";for(var a=0;a<d.widgets.length;a++){var c=d.widgets[a];if(!c.uniqueid){c.uniqueid=d.uniqueid+"_widget"+a;d.widgets[a]["uniqueid"]=c.uniqueid}b+="<tr><td nowrap align=left>"+c.label+' </td><td><td nowrap width="10"></td><td width="99%" align=left>';switch(c.type){case"combo":b+='<select id="'+c.uniqueid+'" onChange="widgetEvent('+YAHOO.lang.JSON.stringify(d).replace(/"/g,"'")+');">';for(var e=0;e<c.options.length;e++){b+='<option value="'+c.options[e]+'">'+c.options[e]+"</option><br/>"}b+="</select>";break;case"text":b+='<input onKeyDown="if(event.keyCode==13){widgetEvent('+YAHOO.lang.JSON.stringify(d).replace(/"/g,"'")+');};" type="textbox" id="'+c.uniqueid+'" />';break;default:alert("Error - Widget "+a+"'s type ("+c.type+") is not a known widget type");return false}b+="</td></tr>"}f.innerHTML="<table>"+b+"</table>"}applyChartWidgetSettings(d)}function applyChartWidgetSettings(e){if(e.widgets){for(var a=0;a<e.widgets.length;a++){var c=e.widgets[a];var d=document.getElementById(c.uniqueid);if(c.forcevalue){d.value=c.forcevalue;d.text=c.forcevalue}else{var b=getCookie(e.uniqueid+"_"+c.uniqueid);if(b!=""){b=b.replace(/%20/g," ");d.value=b;d.text=b}else{if(c.defaultvalue){d.value=c.defaultvalue;d.text=c.defaultvalue}}}}}}function buildExternalSourceParams(g){var c="";g.externalSourceParams="";if(g.widgets){for(var b=0;b<g.widgets.length;b++){var f=g.widgets[b];var a=f.uniqueid;var e=document.getElementById(a);if(e){c=e.value}else{var d=getCookie(g.uniqueid+"_"+f.uniqueid);if(d!=""){c=d}else{if(f.defaultvalue){c=f.defaultvalue}}}g.externalSourceParams+="/"+a+"/"+c}}return g}function widgetEvent(d){if(d.widgets){for(var c=0;c<d.widgets.length;c++){var b=d.widgets[c]["uniqueid"];var a=document.getElementById(b).value;setCookie(d.uniqueid+"_"+b,a,400)}}d=buildExternalSourceParams(d);d.externalSource=d.oldExternalSource;d.oldExternalSource=undefined;d.chartData=undefined;d.chartDataText=undefined;document.getElementById(d.uniqueid+"holder").finnishFadeCallback=new Function("makeElementVisible('"+d.uniqueid+"loader'); createJQChart("+YAHOO.lang.JSON.stringify(d)+"); this.finnishFadeCallback = '';");fadeOut(d.uniqueid+"holder",300)}function makeElementVisible(a){var b=document.getElementById(a);b.style.opacity="1";b.style.filter="alpha(opacity = '100')"}function makeElementInvisible(a){var b=document.getElementById(a);b.style.opacity="0";b.style.filter="alpha(opacity = '0')"}function fadeIn(a,d){var c=document.getElementById(a);if(c==null){return}var b=getGlobalSetting("fadingEnabled");if(b=="false"){makeElementVisible(a);if(c.finnishFadeCallback){c.finnishFadeCallback();c.finnishFadeCallback=undefined}return}if(typeof c.isFadingNow!="undefined"){if(c.isFadingNow==true){return}}c.isFadingNow=true;c.FadeState=null;c.FadeTimeLeft=undefined;makeElementInvisible(a);c.style.opacity="0";c.style.filter="alpha(opacity = '0')";fade(a,d)}function fadeOut(a,d){var c=document.getElementById(a);if(c==null){return}var b=getGlobalSetting("fadingEnabled");if(b=="false"){makeElementInvisible(a);if(c.finnishFadeCallback){c.finnishFadeCallback();c.finnishFadeCallback=undefined}return}if(typeof c.isFadingNow!="undefined"){if(c.isFadingNow==true){return}}c.isFadingNow=true;c.FadeState=null;c.FadeTimeLeft=undefined;makeElementVisible(a);c.style.opacity="1";c.style.filter="alpha(opacity = '100')";fade(a,d)}function fade(a,c){var b=document.getElementById(a);if(b==null){return}if(b.FadeState==null){if(b.style.opacity==null||b.style.opacity==""||b.style.opacity=="1"){b.FadeState=2}else{b.FadeState=-2}}if(b.FadeState==1||b.FadeState==-1){b.FadeState=b.FadeState==1?-1:1;b.FadeTimeLeft=c-b.FadeTimeLeft}else{b.FadeState=b.FadeState==2?-1:1;b.FadeTimeLeft=c;setTimeout("animateFade("+new Date().getTime()+",'"+a+"',"+c+")",33)}}function animateFade(d,a,f){var b=new Date().getTime();var g=b-d;var c=document.getElementById(a);if(c.FadeTimeLeft<=g){if(c.FadeState==1){c.style.filter="alpha(opacity = 100)";c.style.opacity="1"}else{c.style.filter="alpha(opacity = 0)";c.style.opacity="0"}c.isFadingNow=false;c.FadeState=c.FadeState==1?2:-2;if(c.finnishFadeCallback){c.finnishFadeCallback();c.finnishFadeCallback=""}return}c.FadeTimeLeft-=g;var e=c.FadeTimeLeft/f;if(c.FadeState==1){e=1-e}c.style.opacity=e;c.style.filter='alpha(opacity = "'+(e*100)+'")';setTimeout("animateFade("+b+",'"+a+"',"+f+")",33)}function setChartWidthAttribs(d){var b=false;if(d.chartData){if(d.chartType=="bar"||d.chartType=="stackedbar"){if(d.chartType=="stackedbar"){var c=d.chartData[0].length}else{if(d.chartType=="bar"){var c=d.chartData.length}}var a=(c*10)+(c*35)+40;if(d.width<a){b=true}}}if(typeof d.autoWidth!="undefined"){if(d.autoWidth==true){b=true}}if(b==true){document.getElementById(d.uniqueid+"loader").style.width="100%";document.getElementById(d.uniqueid+"holder").style.width="100%";document.getElementById(d.uniqueid+"holder").style.overflow="auto";document.getElementById(d.uniqueid).style.width=a+"px";document.getElementById(d.uniqueid+"toplegend").style.width=a+"px";if(d.align=="center"){document.getElementById(d.uniqueid).style.marginLeft="auto";document.getElementById(d.uniqueid).style.marginRight="auto";document.getElementById(d.uniqueid+"toplegend").style.marginLeft="auto";document.getElementById(d.uniqueid+"toplegend").style.marginRight="auto"}}else{document.getElementById(d.uniqueid+"loader").style.width="100%";document.getElementById(d.uniqueid+"holder").style.width=d.width+"px";document.getElementById(d.uniqueid+"holder").style.overflow="";document.getElementById(d.uniqueid).style.width=d.width+"px";document.getElementById(d.uniqueid+"toplegend").width=d.width+"px"}}function getTableFromChartData(d){var c='<table width="100%" border=1>';c+="<tr><td></td>";for(var a=0;a<d.chartDataText.length;a++){c+="<th nowrap><b>"+d.chartDataText[a]+"</b></th>"}c+="</tr>";for(var a=0;a<d.chartData.length;a++){var b=d.chartData[a];c+="<tr>";c+="<th><b>"+d.chartDataText[a]+"</b></th>";if(typeof(b)=="object"){for(var e=0;e<b.length;e++){c+="<td>"+b[e]+"</td>"}}else{c+="<td>"+b+"</td>"}c+="</tr>"}c+="</table>";return c}function removeDecFromPointLabels(g){var f="";var b=document.getElementById(g.uniqueid);for(var a=0;a<b.childNodes.length;a++){var e=b.childNodes[a];if(typeof e.classList=="undefined"){e.classList=String(e.className).split(" ")}if(e.classList){if(e.classList[0]=="jqplot-point-label"){thisLabelValue=e.innerHTML*1;e.innerHTML=thisLabelValue;e.value=thisLabelValue;if(e.innerHTML*1==0){e.innerHTML=""}if(getGlobalSetting("pointLabelsOutline")=="true"){f="text-shadow: ";f+="#FFFFFF 0px -1px 0px, ";f+="#FFFFFF 0px 1px 0px, ";f+="#FFFFFF 1px 0px 0px, ";f+="#FFFFFF -1px 1px 0px, ";f+="#FFFFFF -1px -1px 0px, ";f+="#FFFFFF 1px 1px 0px; ";e.innerHTML='<span style="'+f+g.pointLabelStyle+'">'+e.innerHTML+"</span>";e.style.textShadow="text-shadow: #FFFFFF 0px -1px 0px, #FFFFFF 0px 1px 0px, #FFFFFF 1px 0px 0px, #FFFFFF -1px 1px 0px, #FFFFFF -1px -1px 0px, #FFFFFF 1px 1px 0px;"}else{e.innerHTML='<span style="'+g.pointLabelStyle+'">'+e.innerHTML+"</span>"}var d=String(e.style.left).replace("px","")*1;var c=String(e.style.top).replace("px","")*1;d+=g.pointLabelAdjustX;c+=g.pointLabelAdjustY;if(thisLabelValue>=100){d-=2}if(thisLabelValue>=1000){d-=3}e.style.left=d+"px";e.style.top=c+"px";e.style.color="black"}}}}function removeOverlappingPointLabels(f){if(f.chartType!="stackedbar"&&f.chartType!="stackedline"){return}var s=document.getElementById(f.uniqueid);var h={};var b=[];var l=0;var m=0;for(var p=0;p<s.childNodes.length;p++){var r=s.childNodes[p];if(typeof r.classList=="undefined"){r.classList=String(r.className).split(" ")}if(r.classList[0]=="jqplot-point-label"){var q=false;if(typeof r.isRemoved!="undefined"){q=r.isRemoved}if(q==false){var g=String(r.style.left).replace("px","")*1;var k=String(r.style.top).replace("px","")*1;l=r.value;var a="left_"+g;if(typeof h[a]=="undefined"){h[a]=[];b.push(a)}var e={left:g,top:k,value:l,obj:r};h[a].push(e)}}}for(var p=0;p<b.length;p++){var a=b[p];for(var o=0;o<h[a].length;o++){var j=h[a][o];for(var n=0;n<h[a].length;n++){var i=h[a][n];m=Math.abs(i.top-j.top);if(m<12&&m!=0){if(i.value<j.value){i.obj.innerHTML="";i.obj.isRemoved=true}else{j.obj.innerHTML="";i.obj.isRemoved=true}removeOverlappingPointLabels(f);return}}}}}function hideButtonClick(a,c,b){setChartSettingsVisibility(c,false)}function setChartSettingsVisibility(d,c){var a=d+"WidgetSpaceHolder";var b=document.getElementById(a);if(c=="toggle"){if(b.style.display=="none"){c=true}else{c=false}}if(c==true){b.style.display=""}else{b.style.display="none"}}function globalSettingUpdate(c){var b=document.getElementById(c+"GlobSettings");var e=b.childNodes;for(var a=0;a<e.length;a++){var d=e[a];if(d.nodeName=="INPUT"){if(d.type=="checkbox"){setGlobalSetting(d.id,d.checked)}else{setGlobalSetting(d.id,d.value)}}}redrawAllCharts()}function globalSettingRefreashUI(e){var b=document.getElementById(e.uniqueid+"GlobSettings");var d=b.childNodes;for(var a=0;a<d.length;a++){var c=d[a];if(c.nodeName=="INPUT"){if(c.type=="checkbox"){c.checked=(getGlobalSetting(c.id)=="true")?true:false}else{c.value=getGlobalSetting(c.id);c.text=c.value}}}}function showSetingMode(c){if(c==true){var d=document.getElementsByName("chartSettingsBasic");var b=document.getElementsByName("chartSettingsGlobal")}else{var b=document.getElementsByName("chartSettingsBasic");var d=document.getElementsByName("chartSettingsGlobal")}for(var a=0;a<b.length;a++){b[a].style.display="none"}for(var a=0;a<b.length;a++){d[a].style.display=""}}function getGlobalSetting(b){var a=getCookie("chartGlobSetting_"+b,"-RETURN-DEFAULT-SETTING-");if(a!="-RETURN-DEFAULT-SETTING-"){return a}else{if(typeof globalSettingsDefaults[b]=="undefined"){alert("You have referenced a global setting ("+b+"), but have not defined a default value for it! Please defined a def-value in the object called globalSettingsDefaults that is located within the global scope of jqplotWrapper.js")}else{return String(globalSettingsDefaults[b])}}}function setGlobalSetting(a,b){setCookie("chartGlobSetting_"+a,b)}function alterChartByGlobals(a){if(getGlobalSetting("barShadows")=="true"){a.seriesDefaults.rendererOptions.shadowDepth=3;a.seriesDefaults.rendererOptions.shadowOffset=3}if(getGlobalSetting("barShadowDepth")!="no-setting"&&getGlobalSetting("barShadows")=="true"){a.seriesDefaults.rendererOptions.shadowDepth=getGlobalSetting("barShadowDepth");a.seriesDefaults.rendererOptions.shadowOffset=getGlobalSetting("barShadowDepth")}if(getGlobalSetting("gridLines")=="true"){a.grid.gridLineWidth=1;a.grid.borderWidth=0;a.grid.gridLineColor=undefined;a.grid.drawGridLines=true;a.grid.show=true}if(getGlobalSetting("dropShadows")!="false"){a.grid.shadow=true}if(getGlobalSetting("pointLabels")=="true"){a.seriesDefaults.pointLabels.show=true}return a}function redrawAllCharts(){for(var b in chartsOnDOM){var a=chartsOnDOM[b];createJQChart(a);globalSettingRefreashUI(a)}}function getNextNumberDivisibleBy5(b){b=Math.round(b);for(var a=0;a<8;a++){var c=(b/5)*1;if(c==Math.round(c)){return b}else{b++}}}function setCookie(b,c,a){var d=new Date();d.setDate(d.getDate()+a);document.cookie=b+"="+escape(c)+((a==null)?"":";expires="+d.toUTCString())}function getCookie(b,a){if(document.cookie.length>0){c_start=document.cookie.indexOf(b+"=");if(c_start!=-1){c_start=c_start+b.length+1;c_end=document.cookie.indexOf(";",c_start);if(c_end==-1){c_end=document.cookie.length}return unescape(document.cookie.substring(c_start,c_end))}}if(typeof a!="undefined"){return a}else{return""}};